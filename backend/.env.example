# .env.example
# Environment variables for local development.
# Copy this file to .env and fill in the secrets.

#----------------------------------------------------
# DATABASE & INFRASTRUCTURE (Matches docker-compose.yml)
#----------------------------------------------------
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=core_api_dev
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# For Docker: use container hostnames
# For local: use localhost
REDIS_HOST=redis
# Redis port (default: 6379 for non-TLS, 6380 for TLS/AWS ElastiCache)
REDIS_PORT=6379
# Redis password (optional, required for AWS ElastiCache and managed Redis)
REDIS_PASSWORD=
# Enable TLS for Redis (optional: set to 'true' or use port 6380 for AWS ElastiCache)
# TLS is automatically enabled if REDIS_PORT=6380
REDIS_TLS=false
# Redis cache TTL in milliseconds (default: 300000 = 5 minutes)
REDIS_TTL=300000

RABBITMQ_URL="amqp://guest:guest@rabbitmq:5672"
RABBITMQ_USER=guest
RABBITMQ_PASS=guest

#----------------------------------------------------
# SERVICE PORTS
#----------------------------------------------------
ADMIN_SERVICE_PORT=4242
CORE_API_PORT=3000
KMS_SERVICE_PORT=3001
BLOCKCHAIN_SERVICE_PORT=3003
IPFS_SERVICE_PORT=3004

#----------------------------------------------------
# INTERNAL SERVICE URLS (For inter-service communication)
#----------------------------------------------------
# For Docker: use container hostnames
# For local: use localhost
KMS_SERVICE_URL=http://kms-service:${KMS_SERVICE_PORT}
BLOCKCHAIN_SERVICE_URL=http://blockchain-service:${BLOCKCHAIN_SERVICE_PORT}
IPFS_SERVICE_URL=http://ipfs-service:${IPFS_SERVICE_PORT}
# Lens Platform Services
LENS_MANAGER_URL=http://lens-manager:4001
INDEXER_API_URL=http://indexer-api:4000

#----------------------------------------------------
# ENVIRONMENT
#----------------------------------------------------
NODE_ENV=development

#----------------------------------------------------
# AUTHENTICATION & SECRETS
#----------------------------------------------------
# A long, random string for signing JWTs
JWT_SECRET="your-super-secret-jwt-key-for-local-development"
JWT_ACCESS_TOKEN_EXPIRATION="12h"
JWT_REFRESH_TOKEN_EXPIRATION="7d"

# A 64-character hex string (32 bytes) for encrypting KMS data.
# Run `pnpm generate:key` to create a new one.
MASTER_KEK="your-64-character-hex-key-for-local-development"

# Private key for the admin wallet used by the blockchain-service.
# DO NOT USE A REAL WALLET WITH FUNDS FOR DEVELOPMENT.
ADMIN_WALLET_PRIVATE_KEY="your-admin-wallet-private-key-for-local-development"

# Platform verifier private key (must be 64-character hex string)
PLATFORM_VERIFIER_PRIVATE_KEY="your-platform-verifier-private-key"
# Platform verifier wallet address for auto-granting verifier role
PLATFORM_VERIFIER_ADDRESS="0x1234567890123456789012345678901234567890"
# Factory Proxy Contract Address
FACTORY_PROXY_CONTRACT_ADDRESS="0x1234567890123456789012345678901234567890"
# Asset Registry Contract Address
ASSET_REGISTRY_CONTRACT_ADDRESS="0x9876543210987654321098765432109876543210"

#----------------------------------------------------
# BLOCKCHAIN CONFIGURATION
#----------------------------------------------------
# URL for the Ethereum JSON-RPC endpoint (pointing to your running Docker container)
RPC_URL="https://your-ethereum-rpc-endpoint"
# The deployed address of the master HauskaContractFactory (via its proxy)
FACTORY_CONTRACT_ADDRESS="0x-your-factory-contract-address"
# The address of the USDC token for the local network
USDC_CONTRACT_ADDRESS="0x-your-usdc-contract-address"

#----------------------------------------------------
# FAUCET CONFIGURATION
#----------------------------------------------------
# Amount to fund user wallets in native tokens (in wei)
FAUCET_NATIVE_AMOUNT=1000000000000000000
# Amount to fund user wallets in USDC (in smallest unit, e.g., if 6 decimals, 1 USDC = 1000000)
FAUCET_USDC_AMOUNT=1000000000
# Private key for the faucet wallet (must have funds)
FAUCET_WALLET_PRIVATE_KEY="your-faucet-wallet-private-key"

#----------------------------------------------------
# EXTERNAL API KEYS & CONFIG
#----------------------------------------------------
# Web3Auth (Sapphire Devnet)
WEB3AUTH_JWKS_URL=https://api-auth.web3auth.io/jwks
WEB3AUTH_ISSUER=https://api-auth.web3auth.io
WEB3AUTH_AUDIENCE="your-web3auth-audience"

# Resend (Email Service)
RESEND_API_KEY="re_your-resend-api-key"
RESEND_FROM_EMAIL="Royalty Marketplace <noreply@ardata.tech>"

# Pinata (IPFS Pinning Service)
PINATA_API_URL=https://api.pinata.cloud
PINATA_JWT="your-pinata-jwt-token"
# Pinata provider timeouts in milliseconds
# Timeout for file uploads (default: 120000 = 2 minutes)
PINATA_UPLOAD_TIMEOUT=120000
# Timeout for pin operations (default: 30000 = 30 seconds)
PINATA_PIN_TIMEOUT=30000
# Timeout for health check (default: 3000 = 3 seconds)
PINATA_HEALTH_CHECK_TIMEOUT=3000

# Timeout for file uploads (default: 120000 = 2 minutes)
# Timeout for pin operations (default: 30000 = 30 seconds)
# HTTP timeout for IPFS requests in milliseconds (default: 60000 = 60 seconds)
HTTP_TIMEOUT=60000

#----------------------------------------------------
# FRONTEND URLS (For CORS and email links)
#----------------------------------------------------
ROYALTY_MARKETPLACE_URL="http://localhost:5173"
ADMIN_DASHBOARD_URL="http://localhost:5175"

#----------------------------------------------------
# MISC 
#----------------------------------------------------
# Local path for temporary file uploads
TEMP_STORAGE_PATH="./temp-uploads"

#================================================================
# 7. AWS-KMS Cridential
AWS_REGION="us-east-1"
AWS_ACCESS_KEY_ID="your_key"
AWS_SECRET_ACCESS_KEY="your_secret"
KMS_KEY_ALIAS_PREFIX="hauska-wallet-key"
#================================================================
# AWS KMS Configuration
KMS_KEY_ALIAS_PREFIX=hauska-wallet-key
KMS_KEY_POOL_SIZE=10
